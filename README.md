# 赛博算命3.0-五运六气

- [Snoopy使用方法](##使用方法)

- [五运六气计算法](##五运六气计算方法)

## 使用方法

## `get_guest_qi`

用于计算给定日期的客气

## `get_main_qi`
 
用于计算给定日期的主气

## `calculate_yun`

用于计算运气

## 五运六气计算方法
先确定干支，与传统干支不一样，要修改将日期转化为农历的干支纪年以立春为起点开始修改干支。


- **若正月初一在立春前**，则正月初一至立春前这段时间使用本年干支的上一年的干支，立春之后使用本年干支


- **若正月初一与立春重合**，则使用本年干支


- **若正月初一在立春之后**，则立春至正月初一这段时间使用本年干支的下一年干支，其余时间干支正常。

### 1.岁运：

#### 天干与岁运对应关系

| 年干 | 甲    | 乙         | 丙         | 丁         | 戊         | 己         | 庚         | 辛         | 壬         | 癸         |
|------|-------|------------|------------|------------|------------|------------|------------|------------|------------|------------|
| 岁运 | 土运太过| 金运及 | 水运太过 | 木运不及 | 火运太过 | 土运不及 | 金运太过 | 水运不及 | 木运太过 | 火运不及 |

### 2.司天之气

#### 地支与司天之气对应关系

| 地支 | 子         | 丑         | 寅         | 卯         | 辰         | 巳         | 午         | 未         | 申         | 酉         | 戌         | 亥         |
|------|------------|------------|------------|------------|------------|------------|------------|------------|------------|------------|------------|------------|
| 司天之气 | 少阴君火 | 太阴湿土 | 少阳相火 | 阳明燥金 | 太阳寒水 | 厥阴风木 | 少阴君火 | 太阴湿土 | 少阳相火 | 阳明燥金 | 太阳寒水 | 厥阴风木 |

### 3. 在泉之气

#### 地支与在泉之气对应关系

| 地支 | 子         | 丑         | 寅         | 卯         | 辰         | 巳         | 午         | 未         | 申         | 酉         | 戌         | 亥         |
|------|------------|------------|------------|------------|------------|------------|------------|------------|------------|------------|------------|------------|
| 在泉之气 | 阳明燥金 | 太阳寒水 | 厥阴风木 | 少阴君火 | 太阴湿土 | 少阳相火 | 阳明燥金 | 太阳寒水 | 厥阴风木 | 少阴君火 | 太阴湿土 | 少阳相火 |

### 4. 主气

以立春为起点将一年分为六步气，每步气四个节气：

| 初之气 | 一之气   | 二之气   | 三之气   | 四之气   | 终之气   |
|------|-------|-------|-------|-------|-------|
| 立春-春分 | 清明-小满 | 芒种-大暑 | 立秋-秋分 | 寒露-小雪 | 大雪-大寒 |

主气每年不变：

| 初之气 | 一之气   | 二之气   | 三之气   | 四之气   | 终之气   |
|------|-------|-------|-------|-------|-------|
| 厥阴风木 | 少阴君火 | 少阳相火 | 太阴湿土 | 阳明燥金 | 太阳寒水 |

### 5. 客气

以立春为起点将一年分为六步气，每步气四个节气：

| 初之气 | 一之气   | 二之气   | 三之气   | 四之气   | 终之气   |
|------|-------|-------|-------|-------|-------|
| 立春-春分 | 清明-小满 | 芒种-大暑 | 立秋-秋分 | 寒露-小雪 | 大雪-大寒 |

客气随年支的改变而改变，计算如下：

年支的司天之气为三之气，年支的在泉之气为六之气，其余四年按以下顺序排入：

| 厥阴风木 | 少阴君火 | 少阳相火 | 太阴湿土 | 阳明燥金 | 太阳寒水 |
|------|-------|-------|-------|-------|-------|

例如，2022年5月1日，农历壬寅年，少阳相火司天，厥阴风木在泉，则三之气为少阳相火，终之气为厥阴风木，其它按顺序排列如下：

| 少阴君火 | 少阳相火 | 太阴湿土 | 阳明燥金 | 太阳寒水 | 厥阴风木 |
|------|-------|-------|-------|-------|------|

### 6. 客气与主气的关系

每步气都有五行属性，木、火、土、金、水。五行相生关系如下：

- 木生火
- 火生土
- 土生金
- 金生水
- 水生木

五行相克关系如下：

- 木克土
- 土克水
- 水克火
- 火克金
- 金克木

相得情况：

- 若主气与客气的关系为相生或者相同，则为相得。其中，客气君火加临主气相火为相得顺，客气相火加临主气君火为相得逆。

不相得情况：

- 若主气与客气的关系为相克，则不相得。其中，主气克客气为不相得逆，客气克主气为不相得顺。

### 7. 运气相合

年干支决定，有规则：

| 年干支 | 运气     |
|--------|----------|
| 甲子   | 强土火燥 |
| 乙丑   | 弱金湿寒 |
| 丙寅   | 强水火风 |
| 丁卯   | 弱木燥火 |
| ...    | ...     |

### 7.1 运气异化
根据年干支确定，有规则：

| 年干支 | 异化 |
|--------|------|
| 甲子   | 顺化 |
| 乙丑   | 顺化 |
| 丙寅   | 不和 |
| ...    | ...  |

### 7.2 运气同化
根据年干支确定，有规则：

| 年干支 | 同化 |
|--------|------|
| 甲子   | 0    |
| 乙丑   | 0    |
| 丙寅   | 0    |
| ...    | ...  |

## 8. 主运和客运
从立春为起点将每年均分为五步运，

### 8.1 主运
主运顺序不变为角（木）、徵（火）、宫（土）、商（金）、羽（水），随岁运不同有太少之分，计算方式为，岁运确定后，如甲子年土运太过，则宫运为太宫，其余按太少相生原则，太角生少徵，少徵生太宫，太宫生少商，少商生太羽。

| 初之运 | 二之运 | 三之气 | 四之气 | 终之气 |
|--------|--------|-------|--------|--------|
| 太角（木） | 少徵（火） | 太宫（土） | 少商（金） | 太羽（水） |

### 8.2 客运
客运的太少和顺序均随岁运改变，计算方式为岁运确定后，如甲子年土运太过，则初之运为太宫，按太少相生定其它运，但太少相生只能至羽，如初之运太宫生二之运少商，二之运少商生三之运太羽，至太羽结束，不能太羽生少角。其余运则从太宫相前推算，按太角生少徵，少徵生太宫，然后按相生顺序排列，三之运太羽，四之运太角，二之运少徵。

| 初之运 | 二之运 | 三之运 | 四之运 | 终之运 |
|--------|--------|--------|--------|--------|
| 太宫（土） | 少商（金） | 太羽（水） | 太角（木） | 少徵（火） |


## 9. 关系推导

步骤1：从原始数据中提取每个样本的出生运气和发病时的中医运气情况。

步骤2：为每种可能的中医运气创建一个新的列。

步骤3：对每个样本，根据其发病时表现出的运气，在相应的运气列下填入1，未表现出的填入0。

步骤4：使用这个转换后的数据表来分析和比较不同出生运气与发病时运气之间的相关性，从而找出可能的模式或趋势。